RewriteEngine On

# 1. Force HTTPS and non-www (canonical domain)
RewriteCond %{HTTPS} off [OR]
RewriteCond %{HTTP_HOST} ^www\. [NC]
RewriteCond %{HTTP_HOST} ^(?:www\.)?(.+)$ [NC]
RewriteRule ^ https://%1%{REQUEST_URI} [L,NE,R=301]

# 2. Custom 404 Error Page
ErrorDocument 404 /404.html

# 301 Redirects for Old URLs
RewriteRule ^about-us\.html$ /about.html [L,R=301]
RewriteRule ^contact-us\.html$ /contact.html [L,R=301]
RewriteRule ^portfolio\.html$ /projects.html [L,R=301]
RewriteRule ^work\.html$ /projects.html [L,R=301]
RewriteRule ^resume\.html$ /experience.html [L,R=301]

# 3. Compression (Gzip/Deflate)
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript

# 4. Security Headers
<IfModule mod_headers.c>
  Header set X-XSS-Protection "1; mode=block"
  Header always append X-Frame-Options SAMEORIGIN
  Header set X-Content-Type-Options nosniff
</IfModule>

# 5. Browser Caching & Expires Headers
<IfModule mod_expires.c>
    ExpiresActive on
    ExpiresDefault                                      "access plus 1 month"
    ExpiresByType text/css                              "access plus 1 month"
    ExpiresByType application/json                      "access plus 0 seconds"
    ExpiresByType application/ld+json                   "access plus 0 seconds"
    ExpiresByType application/xml                       "access plus 0 seconds"
    ExpiresByType text/xml                              "access plus 0 seconds"
    ExpiresByType image/x-icon                          "access plus 1 year"
    ExpiresByType text/html                             "access plus 0 seconds"
    ExpiresByType application/javascript                "access plus 1 month"
    ExpiresByType image/gif                             "access plus 1 month"
    ExpiresByType image/jpeg                            "access plus 1 month"
    ExpiresByType image/webp                            "access plus 1 month"
    ExpiresByType image/png                             "access plus 1 month"
    ExpiresByType font/opentype                         "access plus 1 month"
    ExpiresByType application/font-woff                 "access plus 1 month"
    ExpiresByType application/font-woff2                "access plus 1 month"
    ExpiresByType image/svg+xml                         "access plus 1 month"
</IfModule>

# 6. Remove ETag (to force using Expires headers)
<FilesMatch "\.(ico|pdf|flv|jpg|jpeg|png|webp|gif|js|css|swf)(\.gz)?$">
    Header unset ETag
    FileETag None
</FilesMatch>

# Removed incorrect redirects for rusticblendsindia
# RewriteCond %{HTTP_HOST} ^rusticblendsindia\.com$ [OR]
# RewriteCond %{HTTP_HOST} ^www\.rusticblendsindia\.com$
# RewriteRule ^/?$ "https\:\/\/rusticblends\.in\/" [R=301,L]

# BEGIN cPanel-generated php ini directives, do not edit
<IfModule php8_module>
   php_flag display_errors Off
   php_value max_execution_time 3000
   php_value max_input_time 6000
   php_value max_input_vars 8000
   php_value memory_limit 128M
   php_value post_max_size 64M
   php_value session.gc_maxlifetime 14400
   php_value session.save_path "/var/cpanel/php/sessions/ea-php81"
   php_value upload_max_filesize 64M
   php_flag zlib.output_compression On
</IfModule>
<IfModule lsapi_module>
   php_flag display_errors Off
   php_value max_execution_time 3000
   php_value max_input_time 6000
   php_value max_input_vars 8000
   php_value memory_limit 128M
   php_value post_max_size 64M
   php_value session.gc_maxlifetime 14400
   php_value session.save_path "/var/cpanel/php/sessions/ea-php81"
   php_value upload_max_filesize 64M
   php_flag zlib.output_compression On
</IfModule>
# END cPanel-generated php ini directives, do not edit

# php -- BEGIN cPanel-generated handler, do not edit
<IfModule mime_module>
  AddHandler application/x-httpd-ea-php81 .php .php8 .phtml
</IfModule>
# php -- END cPanel-generated handler, do not edit